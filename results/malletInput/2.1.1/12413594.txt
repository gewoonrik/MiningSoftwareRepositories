    typeahead: get context / calling element with `this`  i am using the  typeahead  component of     2.1.1, and jquery 1.8.1    i am trying to access the text box element from within typeahead's  updater  function. here is my current code, which works great:     $('#client-search').typeahead({     source: function (query, process) {         $.get(url, { query: query }, function (data) {             labels = [];             mapped = {};             $.each(data, function(i,item) {                 mapped[item.label] = item.value;                 labels.push(item.label);             });             process(labels);         });     }     ,updater: function (item) {         $('#client-id').val(mapped[item]);         return item;     }     ,items: 10     ,minlength: 2 });      i have many typeahead search boxes on the same page. each search box has an id  #xxx-search  and a corresponding hidden input with id  #xxx-id . i'd like to re-use the same code for everything by doing something like this:     $('#client-search, #endclient-search, #other-search').typeahead({      ...      ,updater: function (item) {         var target = $(this).attr('id').split('-')[0] + '-id';         $('#'+target).val(mapped[item]);         return item;     }      ...      i thought that  this  would refer to the text box element in use, but apparently not, because i get an undefined error in firebug:     $(this).attr("id") is undefined      when i use  this  instead of  $(this) , i get:     this.attr is not a function      can anyone help make this work?        update: the answer, and more!     thanks to benedict_w's answer below, not only does this work perfectly now, but i have also made this much better in terms of re-usability.    here is what my   input  s look like:      input type="text" autocomplete="off"     id="client-search"     data-typeahead-url="/path/to/json"     data-typeahead-target="client-id"   input type="hidden" id="client-id" name="client-id"       notice how the search box references the hidden id.  here's the new js:     $(':input[data-typeahead-url]').each(function(){     var $this = $(this);     $this.typeahead({         source: function (query, process) {             $.get($this.attr('data-typeahead-url'), { query: query }, function (data) {                 labels = [];                 mapped = {};                 $.each(data, function(i,item) {                     mapped[item.label] = item.value;                     labels.push(item.label);                 });                 process(labels);             });         }         ,updater: function (item) {             $('#'+$this.attr('data-typeahead-target')).val(mapped[item]);             return item;         }         ,items: 10         ,minlength: 2     }); });    