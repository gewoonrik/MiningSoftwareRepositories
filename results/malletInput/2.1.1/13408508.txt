display inline errors with simple_form in a   ajax modal  i've found similar stackoverflow questions  here  and  here  but still can't get this to work.    i'm using rails 3.2.8, simpleform 2.0.4, and     2.1.1 (via the  -sass gem 2.1.1.0).    the user should be able to add a contact from a modal popup window. if there are validation errors, they should appear inline, just as if the user were using a non-modal version of the form (red border around field, error message next to field).    i load the modal like this:      a data-toggle="modal" data-target="#new-contact-modal" go modal! /a       here is the   modal, which calls the same  contacts/contact_fields  partial used in the non-modal version.  app/views/contacts/_new_modal.html.erb :      div id="new-contact-modal" class="modal hide fade" tabindex="-1"       role="dialog" aria-labelledby="new-contact-modal-label"       aria-hidden="true"     div class="modal-header"       button type="button" class="close" data-dismiss="modal"       aria-hidden="true" ã— /button       h3 id="new-contact-modal-label"  %= t("contacts.new.header") %  /h3     /div     %= simple_form_for(@contact,        :remote =  true,       :html =  {:class =  "form-horizontal",                  "data-type" =  :json }) do |contact_form| %       div id="new-contact-body" class="modal-body"         %= render 'contacts/contact_fields', :f =  contact_form %       /div       div class="modal-footer"         %= contact_form.submit :class =  "btn btn-primary",            :"data-loading-text"=  ('simple_form.creating') %         %= t('simple_form.buttons.or') %         a data-dismiss="modal" aria-hidden="true"           %= t('simple_form.buttons.cancel') %         /a       /div     % end %   /div        app/controllers/contacts_controller.rb  (intentionally commented out the  format.json  line since i'm trying to send the whole modal back using javascript):     def create   @contact = contact.new(params[:contact])    ...some additional processing...    respond_to do |format|     if @contact.save       format.html { flash[:success] = "contact added."                     redirect_to @contact }       format.json { render json: @contact, status: :created, location: @contact}     else       format.html { render action: "new" }       #format.json { render json: @contact.errors, status: :unprocessable_entity }       format.js { render 'new_modal_error' }     end       app/views/contacts/new_modal_error.js.erb      var modal = " %= escape_javascript(render :partial =  'contacts/new_modal', :locals =  { :contact =  @contact.errors }) % "; $("#new-contact-modal").html($(modal));       app/assets/javascripts/contacts.js  some jquery to reset the form and close the modal on success.      $(function($) {   $("#new_contact")     .bind("ajax:success", function(event, data, status, xhr) {       //   :       $(this).each(function(){         this.reset();       });              $("#new-contact-modal").modal("hide");     }) });      the good news is, this works when the form has no errors:  the contact is added and the modal is hidden.  however if there  are  validation errors, i get the message "json.parse: unexpected character". this comes from jquery.js, line 515, which is the  return  statement in this snippet:     // attempt to parse using the native json parser first if ( window.json    window.json.parse ) {     return window.json.parse( data ); }      if i inspect  data , i see that is is the content of my  new_modal_error.js  file, fully expanded with the form errors, and escaped for javascript. but it's not json.     what am i missing? how do i get the page to process  new_modal_error.js  as a javascript file, not a json variable? or is there an easier way to handle this altogether?  