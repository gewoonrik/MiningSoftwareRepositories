conditional resource loading with HtmlUnit (via play's WithBrowser)  I have a web application written in play 2.0 and have automated tests that use WithBrowser for functional testing (   ).    The web app uses a responsive layout through  , and in order to deal with XSS issues on IE8, we had to add browser-specific code to a page:         I run the automated tests using the default browser, HtmlUnit. When the tests run, HtmlUnit seems to include the scripts and the tests fail with an error. Is there a way to get HtmlUnit to treat the IE-only snippet as a comment, and not execute the scripts in that section?  