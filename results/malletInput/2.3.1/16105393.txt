karma runner > loading  .js before angular and angular-mocks throws exception  i have an angularjs app with some directives which make use of jquery and   components. so, in order to test the directives, i have defined the following order of files in karma.unit.conf.js:     files = [   jasmine,  jasmine_adapter,   'app/components/jquery/jquery.js',  'app/scripts/vendor/ .js',   'app/components/angular/angular.js',  'app/components/angular-mocks/angular-mocks.js',  'app/components/angular-ui/build/angular-ui.js',   'app/scripts/app.js',   'app/scripts/**/*.js',   'test/spec/unit/**/*.js'  ];       if i load first angularjs and angular-mocks and then jquery and  , the tests run and fail because angular uses its own jqlite. but if i change the order as i wrote up here then this is what i get:     edit:    i've found that it isn't jquery what's causing the exception... it's  .js. if i comment the  .js line, the tests run (and fail, as expected because the   components never were loaded). if i load   as above (or in any other place before the tests) then i get this:     phantomjs 1.8 (linux) directive: tkmodal should make hidden element visible failed[39m     at /home/ir/work/campari/app/components/jquery/jquery.js:1763     at /home/ir/work/campari/app/components/jquery/jquery.js:2833     at /home/ir/work/campari/app/components/jquery/jquery.js:2850     at /home/ir/work/campari/app/components/jquery/jquery.js:2850     at /home/ir/work/campari/app/components/jquery/jquery.js:2850      ...      at /home/ir/work/campari/app/components/jquery/jquery.js:2850     at /home/ir/work/campari/app/components/jquery/jquery.js:2850     at /home/ir/work/campari/app/components/jquery/jquery.js:2850     at /home/ir/work/campari/app/components/jquery/jquery.js:3656     at /home/ir/work/campari/app/components/jquery/jquery.js:648     at /home/ir/work/campari/app/components/jquery/jquery.js:270     at /home/ir/work/campari/app/components/jquery/jquery.js:3657     at /home/ir/work/campari/app/components/jquery/jquery.js:3664     at /home/ir/work/campari/app/components/angular-mocks/angular-mocks.js:1589     at /home/ir/work/campari/app/components/angular-mocks/angular-mocks.js:1627      the line  at /home/ir/work/campari/app/components/jquery/jquery.js:2850  repeats endlessly about a 15k times before the test fails (it seems to be happening when jquery tries to execute the internaldata function at jquery.js:1763).     any idea would be appreciated     edit: solved    found the answer, it was a   issue in version 2.3.0, updating to 2.3.1 solved it. see    / /issues/6835   